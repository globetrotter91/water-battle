{"version":3,"sources":["webpack:///webpack/bootstrap f7399ba7ae8a54712b6e","webpack:///./client/game/start.js","webpack:///./client/game/Window.js","webpack:///./client/game/Game.js","webpack:///./client/game/globals.js","webpack:///./client/game/Ocean.js","webpack:///./client/game/Player.js","webpack:///./client/game/Bomb.js","webpack:///./client/game/constants.js"],"names":["lastTime","Date","getTime","windowObj","game","initialize","width","height","resize","render","requestAnimationFrame","update","Window","updateSize","window","onresize","inEvent","innerWidth","innerHeight","inWidth","inHeight","Game","renderer","THREE","WebGLRenderer","camera","PerspectiveCamera","scene","Scene","controls","OrbitControls","domElement","ocean","commands","states","up","right","down","left","movements","speed","angle","selfId","playerList","bombList","socket","io","connect","location","protocol","host","bindSocketEvents","playerName","color","data","xhttp","XMLHttpRequest","that","onreadystatechange","readyState","status","resJson","JSON","parse","responseText","emit","playerId","id","name","open","send","context","getExtension","setClearColor","document","body","appendChild","userPan","target","set","noKeys","userPanSpeed","minDistance","maxDistance","minPolarAngle","maxPolarAngle","Math","PI","initializeLoader","initializeCommands","initializeScene","serverRequest","setLighting","setOcean","loadSkyBox","player","initializeMe","loadingManager","LoadingManager","log","message","type","timeout","console","delay","onProgress","item","loaded","total","onLoad","onError","imageLoader","ImageLoader","shadowMap","enabled","mainDirectionalLight","DirectionalLight","position","add","AmbientLight","initiate","cubeShader","ShaderLib","skyBoxMaterial","ShaderMaterial","fragmentShader","vertexShader","uniforms","side","BackSide","skyBox","Mesh","BoxGeometry","updateEnvironment","directionalLightPosition","Vector3","directionalLightColor","Color","copy","cubeMap","CubeTexture","format","RGBFormat","loader","load","image","getSide","x","y","size","canvas","createElement","getContext","drawImage","images","needsUpdate","generateMipmaps","magFilter","LinearFilter","minFilter","material","value","onkeydown","event","keyCode","inputId","state","onkeyup","display","aspect","updateProjectionMatrix","setSize","bomb","length","ship","forEach","idx","lives","score","shipId","remove","bombId","on","serverResponseEnterGame","bind","initializeSocketEvent","updateSocketEvent","removeSocketEvent","overSocketEvent","lastScore","lastLives","shipList","Ocean","parameters","oceanSide","distortionScale","alpha","object","Water","textureWidth","textureHeight","waterNormals","TextureLoader","texture","wrapS","wrapT","RepeatWrapping","sunDirection","clone","normalize","sunColor","waterColor","rotation","receiveShadow","time","Player","Object3D","OBJMTLLoader","children","child","DoubleSide","lookAt","z","Bomb","geometry","IcosahedronGeometry","i","j","faces","setHex","random","MeshPhongMaterial","vertexColors","FaceColors","shininess","castShadow","URL","API_URL","START_PAGE","getElementById","GAME_CONTAINER","ENTERGAME_REQUEST","ENTERGAME_RESPONSE","DISCONNECT","EVAL_SERVER","EVAL_SERVER_RESPONSE","INITIALIZE","UPDATE","REMOVE","EVENT_HAPPENED","COLOR_SELECTED","GAME_LOST"],"mappings":"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","file":"./client/js/game-ui.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f7399ba7ae8a54712b6e","import Window from './Window';\nimport Game from './Game';\n\n\nvar lastTime = ( new Date() ).getTime();\n\nlet windowObj = new Window(0,0, game)\nwindowObj.initialize();\nlet game = new Game(windowObj.width, windowObj.height);\ngame.initialize();\ngame.resize(windowObj.width, windowObj.height);\n\n\n\nvar render = function () {\n    requestAnimationFrame( render );\n    game.update();\n};\n\nrender();\n\n\n// WEBPACK FOOTER //\n// ./client/game/start.js","\nexport default class Window {\n    constructor(height, width, game){\n        this.height = height; \n        this.width = width;\n        this.game = game;\n    }\n\n    initialize() {\n        this.updateSize();\n\n        // Create callbacks from keyboard\n        window.onresize = function ( inEvent ) {\n            this.updateSize();\n        };\n    }\n    \n    updateSize() {\n        this.width = window.innerWidth ;\n        this.height = window.innerHeight;\n    }\n\n    resizeCallBack(inWidth, inHeight) {\n        this.game.resize( inWidth, inHeight ); \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./client/game/Window.js","import globals from './globals';\nimport Ocean from './Ocean';\nimport Player from './Player';\nimport Bomb from './Bomb';\nimport { ENTERGAME_REQUEST, ENTERGAME_RESPONSE, API_URL, INITIALIZE, UPDATE, REMOVE, GAME_LOST, EVENT_HAPPENED } from './constants';\n\nclass Game {\n    constructor(width, height){\n        this.renderer =  new THREE.WebGLRenderer();\n        this.camera = new THREE.PerspectiveCamera( 55.0, width / height, 0.5, 1000000 );\n        this.scene = new THREE.Scene();\n        this.controls = new THREE.OrbitControls( this.camera, this.renderer.domElement );\n        this.ocean = null;\n        this.commands = {\n            states : {\n                up : false,\n                right : false,\n                down : false,\n                left : false\n            },\n            movements : {\n                speed : 0.0,\n                angle : 0.0\n            }\n        };\n        this.width = width;\n        this.height = height;\n        this.selfId = null;\n        this.playerList = {};\n        this.bombList = {};\n        this.socket = io.connect(`${window.location.protocol}//${window.location.host}`);\n        this.bindSocketEvents();\n        \n    }\n\n    serverRequest(playerName, color) {\n        var data = `name=${playerName}&color=${color}`;\n\n        var xhttp = new XMLHttpRequest();\n        var that = this ; \n        xhttp.onreadystatechange = function() {\n            if (this.readyState == 4 && this.status == 200) {\n\n               var resJson = JSON.parse(this.responseText);\n               that.socket.emit(ENTERGAME_REQUEST,{ playerId : resJson.id, playerName:  resJson.name, color:  resJson.color});\n            }\n        };\n        xhttp.open(\"GET\", `${API_URL}/users?${data}` , true);\n        xhttp.send();\n    }\n\n\n    initialize() {\n            \n        this.renderer.context.getExtension('OES_texture_float');\n        this.renderer.context.getExtension('OES_texture_float_linear');\n        this.renderer.setClearColor( 0x000000 );\n           \n        document.body.appendChild( this.renderer.domElement );\n\n        \n        // Initialize Orbit control\n        this.controls.userPan = false;\n        this.controls.target.set( 0, 100.0, 0 );\n        this.controls.noKeys = true;\n        this.controls.userPanSpeed = 0;\n        this.controls.minDistance = 0;\n        this.controls.maxDistance = 20000.0;\n        this.controls.minPolarAngle = 0;\n        this.controls.maxPolarAngle = Math.PI * 0.75;\n\n        //this.scene.fog = new THREE.FogExp2( 0xaabbbb, 0.001 );\n        this.initializeLoader();\n        this.initializeCommands();\n        this.initializeScene();\n        this.serverRequest('saty', 'ff00ff');\n        \n    }\n    initializeScene() {\n        this.setLighting();\n        this.setOcean();\n        this.loadSkyBox();\n        // show \n    }\n    loadPlayer() {\n        this.player = new Player(1, 'saty', 10, 0, this);\n        this.player.initializeMe(); \n    }\n\n    initializeLoader() {\n\n        this.loadingManager = new THREE.LoadingManager();\n        \n        var log = function( message, type, timeout ) {\n            console.log( message );\n        }\n        \n        var delay = 1500;           // constantise\n        this.loadingManager.onProgress = function( item, loaded, total ) {\n            log( 'Loaded ' + loaded + '/' + total + ':' + item, 'info', delay );\n        };\n        this.loadingManager.onLoad = function () {\n            log( 'Loaded.', 'success', delay );\n        };\n        this.loadingManager.onError = function () {\n            log( 'Loading error.', 'error', delay );\n        };\n        \n        this.imageLoader = new THREE.ImageLoader( this.loadingManager );\n    }\n\n    setLighting() {\n\n        this.renderer.shadowMap.enabled = true;\n        this.mainDirectionalLight = new THREE.DirectionalLight( 0xffffbb, 1 );\n        this.mainDirectionalLight.position.set( - 30, 30, - 30 );\n        this.scene.add( this.mainDirectionalLight, new THREE.AmbientLight( 0x888888 ) );\n    }\n\n\n    setOcean() {\n        this.ocean = new Ocean(this)\n        this.ocean.initiate();\n    }\n\n    loadSkyBox() {\n        \n        var cubeShader = THREE.ShaderLib['cube'];\n\n        var skyBoxMaterial = new THREE.ShaderMaterial( {\n            fragmentShader: cubeShader.fragmentShader,\n            vertexShader: cubeShader.vertexShader,\n            uniforms: cubeShader.uniforms,\n            side: THREE.BackSide\n        } );\n\n        this.skyBox = new THREE.Mesh(\n            new THREE.BoxGeometry( 450000, 450000, 450000 ),\n            skyBoxMaterial\n        );\n\n        this.scene.add( this.skyBox );\n\n        this.updateEnvironment();\n\n    }\n\n    updateEnvironment(){\n\t\tvar directionalLightPosition = new THREE.Vector3( -1, 0.5, 0.8 );;\n\t\tvar directionalLightColor =  new THREE.Color( 1, 0.95, 0.8 );;\n\t\tthis.mainDirectionalLight.position.copy( directionalLightPosition );\n        this.mainDirectionalLight.color.copy( directionalLightColor );                \n        let cubeMap = new THREE.CubeTexture( [] );\n        cubeMap.format = THREE.RGBFormat;\n        var loader = this.imageLoader;\n        loader.load( 'textures/skyboxsun25degtest.png', function ( image ) {\n            var getSide = function ( x, y ) {\n                var size = 1024;\n                var canvas = document.createElement( 'canvas' );\n                canvas.width = size;\n                canvas.height = size;\n                var context = canvas.getContext( '2d' );\n                context.drawImage( image, - x * size, - y * size );\n                return canvas;\n            };\n            cubeMap.images[ 0 ] = getSide( 2, 1 ); // px\n            cubeMap.images[ 1 ] = getSide( 0, 1 ); // nx\n            cubeMap.images[ 2 ] = getSide( 1, 0 ); // py\n            cubeMap.images[ 3 ] = getSide( 1, 2 ); // ny\n            cubeMap.images[ 4 ] = getSide( 1, 1 ); // pz\n            cubeMap.images[ 5 ] = getSide( 3, 1 ); // nz\n            cubeMap.needsUpdate = true;\n        });\n\t\tcubeMap.format = THREE.RGBFormat;\n\t\tcubeMap.generateMipmaps = false;\n\t\tcubeMap.magFilter = THREE.LinearFilter;\n\t\tcubeMap.minFilter = THREE.LinearFilter;\n\n        this.skyBox.material.uniforms['tCube'].value = cubeMap;       \n    }\n\n\n    initializeCommands() {\n        //handling the key down event \n        //fires a event sending the event data to server\n        //-- helps in movement of the player\n        document.onkeydown = (event) => {\n            if (this.socket) {\n                if (event.keyCode === 39) {\n                    this.socket.emit(EVENT_HAPPENED, { inputId: 'right', state: true });\n                    //this.commands.states.right = true;\n                }\t//right\n                    \n                else if (event.keyCode === 40) {\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'down', state: true });\n                    //this.commands.states.down = true;\n                }\t//down\n                    \n                else if (event.keyCode === 37) {\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'left', state: true});\n                    //this.commands.states.left = true;\n                } //left\n                    \n                else if (event.keyCode === 38) {\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'up', state: true });\n                    //this.commands.states.up = true;\n                } // up\n                else if (event.keyCode === 32) {\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'attack', state: true });\n                } \n                    \n            //}\t\t\n        }\n    \n        //handling the key up event \n        //fires a event sending the event data to server based on the key codes\n        //-- helps in stopping movement of the player\n        document.onkeyup = (event) => {\n            //if (this.socket) {\n                if (event.keyCode === 39){\n                    this.socket.emit(EVENT_HAPPENED, { inputId: 'right', state: false });\n                    //this.commands.states.right = false;\n                }\t//right\n                    \n                else if (event.keyCode === 40){\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'down', state: false });\n                    //this.commands.states.down = false;\n                }\t//down\n                    \n                else if (event.keyCode === 37){\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'left', state: false});\n                    //this.commands.states.left = false;\n                } //left\n                    \n                else if (event.keyCode === 38){\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'up', state: false });\n                    //this.commands.states.up = false;\n                } // up\n                else if (event.keyCode === 32) {\n                    this.socket.emit(EVENT_HAPPENED,{ inputId: 'attack', state: false });\n                }\n                \n            }\n        }\n    }\n\n    \n    display() {    \n        //this.groupShip.position.x = 4000;\n        this.renderer.render( this.scene, this.camera );\n    }\n        \n    update() {\n\n        // Update camera position\n        if( this.camera.position.y < 0.0 ) {\n            this.camera.position.y = 2.0;\n        }\n        \n\n        //console.log(this.playerList);\n        //this.updateCommands();\n\n        ///this.player.update(this.commands.movements.speed, this.commands.movements.angle);\n        //console.log(this.player.object.position, this.player.object.rotation);\n        //var currentTime = new Date().getTime();\n        //this.ocean.deltaTime = ( currentTime - globals.lastTime ) / 1000 || 0.0;\n        //globals.lastTime = currentTime;\n\n        //var time = performance.now() * 0.001;\n        this.ocean.update();\n        //this.controls.update();\n        this.display();\n\n\n\n    }\n  \n    resize( inWidth, inHeight ) {\n\n        this.camera.aspect = inWidth / inHeight;\n        this.camera.updateProjectionMatrix();\n        this.renderer.setSize( inWidth, inHeight );\n        this.display();\n\n    }\n\n    serverResponseEnterGame(data) {\n        console.log('init game', data);\n        this.selfId = data.selfId;\n    }\n\n    initializeSocketEvent(data) {\n       if(data.bomb.length>0){\n            //console.log(data); \n       }\n        \n       \n       data.ship.forEach(( ship, idx ) => {\n            var player = new Player(ship.id, ship.name, ship.lives, ship.score, this, ship.position);\n            if(ship.id === this.selfId) {\n                player.initializeMe();\n            }               \n            else{\n                player.initialize();\n            }\n                \n            this.playerList[ship.id] = player;\n            //console.log(this.playerList);\n       });\n\n       data.bomb.forEach(( bomb, idx ) => {\n            //console.log(bomb);\n            var bomb = new Bomb(bomb.id, this, bomb.position);\n            bomb.initialize();\n            this.bombList[bomb.id] = bomb;\n            //console.log(this.bombList);\n       });\n       \n    }\n\n   \n\n   updateSocketEvent(data) {\n    \n        data.ship.forEach(( ship, idx ) => {\n            if(this.playerList[ship.id]) {\n                this.playerList[ship.id].update(ship.position, ship.angle, ship.score, ship.lives);\n            }\n                \n        });\n\n        data.bomb.forEach(( bomb, idx ) => {\n            if(this.bombList[bomb.id]) {\n                this.bombList[bomb.id].update(bomb.position);\n            }\n        });\n   }\n\n    removeSocketEvent(data) {\n        \n        data.ship.forEach(( shipId, idx ) => {\n            if(this.playerList[shipId]) {\n                this.playerList[shipId].remove();\n                delete this.playerList[shipId];\n            }\n        });\n\n        data.bomb.forEach(( bombId, idx ) => {\n            if(this.bombList[bombId]) {\n                this.bombList[bombId].remove();\n                delete this.bombList[bombId];\n            }\n        });\n    }\n\n    overSocketEvent(data) {\n        console.log('game over bitch', data);\n    }\n\n\n    bindSocketEvents() {\n        \n        this.socket.on(ENTERGAME_RESPONSE, this.serverResponseEnterGame.bind(this));\n        // handling server response when a player is initialized\n        this.socket.on(INITIALIZE, this.initializeSocketEvent.bind(this));\n        \n        // handling server response when a player is moving or attacking\n        this.socket.on(UPDATE, this.updateSocketEvent.bind(this));\n        \n        // handling server response when a player is removed\n        this.socket.on(REMOVE, this.removeSocketEvent.bind(this));\n        \n        // handling server response when a player has lost\n        this.socket.on(GAME_LOST, this.overSocketEvent.bind(this));\n\n    }\n}\n\n\nexport default Game;\n\n\n// WEBPACK FOOTER //\n// ./client/game/Game.js","export default {\n    selfId : null,                  // selfId is the id of the player who is logged in \n                                    //-- helps to differentiate the player playing from his enemies\n    lastScore: null,                // score global for the player\n                                    // -- helps to save the last score of the player playing.\n    lastLives: null,                // lives global for the player\n                                    // also referred to as killings in the game.\n                                    // -- helps to save the remaining lives of the player playing.\n    shipList: {},                   // global ship list\n                                    // -- helps to keep the track of the players and the enemies \n    bombList: {},                    // global bomb list\n                                    // -- helps to keep track of the bombd fired. \n    lastTime: ( new Date() ).getTime()\n}\n\n\n// WEBPACK FOOTER //\n// ./client/game/globals.js","class Ocean {\n\tconstructor(game) {\n\t\tthis.game = game;\n\t\tthis.parameters = {\n\t\t\toceanSide: 30000,\n            size: 1.0,\n            distortionScale: 3.7,\n            alpha: 1.0\n\t\t}\n\t\tthis.object = new THREE.Water(\n\t\t\tthis.parameters.oceanSide * 5,\n\t\t\tthis.parameters.oceanSide * 5,\n\t\t\t{\n\t\t\t\ttextureWidth: 512,\n                textureHeight: 512,\n                waterNormals: new THREE.TextureLoader().load( 'textures/waternormals.jpg', (texture) => {\n                    texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n                }),\n                alpha: \tthis.parameters.alpha,\n                sunDirection: this.game.mainDirectionalLight.position.clone().normalize(),\n                sunColor: 0xffffff,\n                waterColor: 0x001e0f,\n                distortionScale: this.parameters.distortionScale,\n\t\t\t}\n\t\t);\n\t}\n\n\tinitiate() {\n        this.object.rotation.x = - Math.PI / 2;\n        this.object.receiveShadow = true;\n\n\t\tthis.game.scene.add(this.object);\n\t}\n\n\tupdate() {\n\t\tthis.object.material.uniforms.time.value += 1.0 / 60.0;\n        this.object.material.uniforms.size.value = this.parameters.size;\n        this.object.material.uniforms.distortionScale.value = this.parameters.distortionScale;\n        this.object.material.uniforms.alpha.value = this.parameters.alpha;\n\t}\n}\n\nexport default Ocean;\n\n\n// WEBPACK FOOTER //\n// ./client/game/Ocean.js","class Player {\n\n\tconstructor(id, name, lives, score, game, position, rotation) {\n\t\tthis.id = id;\n\t\tthis.name = name;\n\t\tthis.lives = lives;\n\t\tthis.score = score;\n\t\tthis.game = game;\n\t\tthis.object = new THREE.Object3D();\n\t\tthis.ship = new THREE.Object3D();\n\t\tthis.position = position;\n\t}\n\n\tload() {\n\t\tvar loader = new THREE.OBJMTLLoader( this.game.loadingManager );\n        loader.load( 'models/BlackPearl/BlackPearl.obj', 'models/BlackPearl/BlackPearl.mtl',  ( object ) => {\n            object.position.y = 20.0;\n            if( object.children ) {\n                for( var child in object.children ) {\n                    object.children[child].material.side = THREE.DoubleSide;\n                }\n            }\n            this.ship.add( object );\n        } );\n\t}\n\n\tinitialize() {\n\t\t//this.object.position.x = this.position.x || 0;\n\t\t//this.object.position.y = this.position.y || 0;\n\t\t//this.object.position.z = this.position.z || 0;\n\n\t\tthis.game.scene.add(this.object);\n\t\tthis.object.add( this.ship );\n\t\tthis.load();\n\t}\n\n\tinitializeMe() {\n\t\tthis.initialize();\n\t\tthis.game.camera.position.set( 0, 350, 800 );\n        this.game.camera.lookAt( new THREE.Vector3() );\n\t\tthis.ship.add( this.game.camera );\n\t}\n\n\tupdate(position, rotation, score, lives) {\n\t\t//console.log(position);\n\t\tthis.object.position.x = position.x; \n\t\tthis.object.position.y = position.y;\n\t\tthis.object.position.z = position.z;\n\t\tthis.object.rotation.y += rotation;\n\t\tthis.lives = lives; \n\t\tthis.score = score;\n\t\t/*\n\t\tthis.object.rotation.y += angle;\n        //this.ship.rotation.z = -angle * 10.0;\n        //this.ship.rotation.x = speed * 0.1;\n        var shipDisplacement = (new THREE.Vector3(0, 0, -1)).applyEuler(this.object.rotation).multiplyScalar( 10.0 * speed );\n\t\tthis.object.position.add( shipDisplacement );\n\t\tthis\n\t\t*/\n\t}\n\tremove(){\n\t\tthis.game.scene.remove(this.object);\n\t}\n\t\n}\n\nexport default Player;\n\n\n// WEBPACK FOOTER //\n// ./client/game/Player.js","\nclass Bomb {\n    constructor(id, game, position) {\n\n        this.id = id;\n        this.game = game;\n        //this.material = new THREE.MeshBasicMaterial({\n           // color: 0x000000\n        //});\n        //this.geometry = new THREE.SphereGeometry(1, 6, 10);\n        //this.object = new THREE.Mesh(this.geometry, this.material);\n        this.position = position;\n\n        this.geometry = new THREE.IcosahedronGeometry( 20, 2 );\n        for ( var i = 0, j = this.geometry.faces.length; i < j; i ++ ) {\n            this.geometry.faces[ i ].color.setHex( Math.random() * 0xffffff );\n        }\n        this.material = new THREE.MeshPhongMaterial( {\n            vertexColors: THREE.FaceColors,\n            shininess: 10,\n            //envMap: cubeMap,\n            side: THREE.DoubleSide\n        } );\n        this.object = new THREE.Mesh( this.geometry, this.material );\n        this.object.castShadow = true;\n        //this.initialize(position);\n    }\n\n    initialize() {\n\n\n\n        console.log(this.object);\n        this.object.position.x = this.position.x;\n        this.object.position.y = this.position.y;\n        this.object.position.z = this.position.z;\n        this.game.scene.add(this.object)\n    }\n\n    update(position) {\n        this.object.position.x = position.x;\n        this.object.position.y = position.y;\n        this.object.position.z = position.z;\n    }\n\n    remove() {\n        this.game.scene.remove(this.object);\n    }\n}\n\nexport default Bomb;\n\n\n// WEBPACK FOOTER //\n// ./client/game/Bomb.js","export const URL = \"http://localhost:8000\";\nexport const API_URL = \"http://localhost:8000/api\";\nexport const START_PAGE = document.getElementById('startPage');\nexport const GAME_CONTAINER = document.getElementById('gameContainer');\n\n//socket events \nexport const ENTERGAME_REQUEST = 'ENTERGAME_REQUEST';\nexport const ENTERGAME_RESPONSE = 'ENTERGAME_RESPONSE';\nexport const DISCONNECT = 'disconnect';\nexport const EVAL_SERVER = 'EVAL_SERVER';\nexport const EVAL_SERVER_RESPONSE = 'EVAL_SERVER_RESPONSE';\nexport const INITIALIZE = 'INITIALIZE';\nexport const UPDATE = 'UPDATE';\nexport const REMOVE = 'REMOVE';\nexport const EVENT_HAPPENED = 'EVENT_HAPPENED';\nexport const COLOR_SELECTED = 'COLOR_SELECTED'; \nexport const GAME_LOST = 'GAME_LOST'; \n\n\n\n// WEBPACK FOOTER //\n// ./client/game/constants.js"],"sourceRoot":""}